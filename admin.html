<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- ØªØ­Ø³ÙŠÙ† SEO Ù…Ø¹ Ø®ØµÙˆØµÙŠØ© -->
  <meta name="description" content="Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù„ØªØ·Ø¨ÙŠÙ‚ ØºØ±ÙØ© Ø§Ù„Ø£Ø³Ø±Ø§Ø±">
  <meta name="robots" content="noindex, nofollow">
  <meta name="author" content="Mohammed Tarek">
  <title>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª - ØºØ±ÙØ© Ø§Ù„Ø£Ø³Ø±Ø§Ø±</title>
  <!-- Ø¥Ø¶Ø§ÙØ© Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">
  <!-- Ø¥Ø¶Ø§ÙØ© Ø®Ø·ÙˆØ· Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„ØµÙŠÙ†ÙŠØ© -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="light">
  <header>
    <div class="site-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª<br><span style="font-size: 1.2rem; font-weight: normal;">Secrets Room Admin</span></div>
    <div style="display: flex; gap: 10px; align-items: center; justify-content: center;">
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø¨ÙŠÙ† Ø§Ù„ÙØ§ØªØ­ ÙˆØ§Ù„Ø¯Ø§ÙƒÙ†">ğŸŒ“</button>
      <select id="langSelect" onchange="changeLanguage(this.value)" style="margin: 0;" aria-label="Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©">
        <option value="ar">ğŸ‡ªğŸ‡¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
        <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
        <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
        <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
        <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
      </select>
      <button id="logoutBtn" onclick="logout()" style="display:none; padding: 8px 12px;" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬">ğŸ”’</button>
    </div>
  </header>

  <main>
    <h2 id="adminTitle">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
    <section id="loginSection" aria-labelledby="adminTitle">
      <label for="pass" class="visually-hidden">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
      <input type="password" id="pass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" aria-label="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" aria-describedby="passDesc" required>
      <p id="passDesc" class="visually-hidden">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</p>
      <button id="loginBtn" onclick="checkPassword()" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Ø¯Ø®ÙˆÙ„</button>
    </section>

    <section id="panel" style="display:none; margin-top:20px;" aria-labelledby="panelTitle">
      <h3 id="panelTitle">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø±Ø¨Ø­ÙŠØ©</h3>
      <p>Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø£Ùˆ Ø±ÙˆØ§Ø¨Ø·Ù‡Ø§ Ø£Ø¯Ù†Ø§Ù‡.</p>
      <form id="adSettingsForm" onsubmit="saveAdSettings(event)">
        <label for="adClient">Ù…Ø¹Ø±Ù Ø¹Ù…ÙŠÙ„ AdSense (data-ad-client):</label>
        <input type="text" id="adClient" placeholder="ca-pub-XXXXXXXXXXXXXXXX" aria-label="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø¹Ù…ÙŠÙ„ AdSense" required>
        <label for="adSlotQuiz">Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø£Ø³Ø¦Ù„Ø© (data-ad-slot):</label>
        <input type="text" id="adSlotQuiz" placeholder="XXXXXXXXXX" aria-label="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù‚Ø³Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©" required>
        <label for="adSlotResults">Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù†ØªØ§Ø¦Ø¬ (data-ad-slot):</label>
        <input type="text" id="adSlotResults" placeholder="XXXXXXXXXX" aria-label="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬" required>
        <label for="adSlotFooter">Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙÙˆØªØ± (data-ad-slot):</label>
        <input type="text" id="adSlotFooter" placeholder="XXXXXXXXXX" aria-label="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙÙˆØªØ±" required>
        <button type="submit" aria-label="Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      </form>
    </section>
  </main>

  <footer style="text-align: center; margin-top: 30px; padding: 15px; font-size: 0.9rem; color: #666; border-top: 1px solid #eee;">
    <p>&copy; 2025 Mohammed Tarek</p>
  </footer>

  <script type="module">
    // ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª locales
    let translations = {};
    async function loadLanguage(lang) {
      try {
        const { default: langData } = await import(`./locales/${lang}.js`);
        translations[lang] = langData;
        applyLanguage(lang);
      } catch (error) {
        console.error(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù„ØºØ© '${lang}':`, error);
        alert(translations['en']?.ui?.language_error || 'Failed to load language, defaulting to English.');
      }
    }

    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ØºØ©
    function applyLanguage(lang) {
      if (!translations[lang]) return;
      const t = translations[lang].admin || {};
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
      document.title = t.admin_title || 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª - ØºØ±ÙØ© Ø§Ù„Ø£Ø³Ø±Ø§Ø±';
      document.querySelector('.site-title').innerHTML = `${t.admin_title || 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª'}<br><span style="font-size: 1.2rem; font-weight: normal;">${
        lang === 'ar' ? 'Secrets Room Admin' : 'ØºØ±ÙØ© Ø§Ù„Ø£Ø³Ø±Ø§Ø± - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©'
      }</span>`;
      document.getElementById('adminTitle').textContent = t.admin_title || 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª';
      document.getElementById('panelTitle').textContent = t.panel_title || 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø±Ø¨Ø­ÙŠØ©';
      document.querySelector('label[for="pass"]').textContent = t.password_label || 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±';
      document.getElementById('pass').placeholder = t.password_placeholder || 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±';
      document.querySelector('#loginSection button').textContent = t.login || 'Ø¯Ø®ÙˆÙ„';
      document.querySelector('label[for="adClient"]').textContent = t.ad_client_label || 'Ù…Ø¹Ø±Ù Ø¹Ù…ÙŠÙ„ AdSense (data-ad-client):';
      document.querySelector('label[for="adSlotQuiz"]').textContent = t.ad_slot_quiz_label || 'Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ø£Ø³Ø¦Ù„Ø© (data-ad-slot):';
      document.querySelector('label[for="adSlotResults"]').textContent = t.ad_slot_results_label || 'Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù†ØªØ§Ø¦Ø¬ (data-ad-slot):';
      document.querySelector('label[for="adSlotFooter"]').textContent = t.ad_slot_footer_label || 'Ù…Ø¹Ø±Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„ÙÙˆØªØ± (data-ad-slot):';
      document.querySelector('#adSettingsForm button').textContent = t.save_settings || 'Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª';
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† localStorage
    function loadAdSettings() {
      try {
        const adSettings = JSON.parse(localStorage.getItem('adSettings')) || {};
        document.getElementById('adClient').value = adSettings.adClient || '';
        document.getElementById('adSlotQuiz').value = adSettings.adSlotQuiz || '';
        document.getElementById('adSlotResults').value = adSettings.adSlotResults || '';
        document.getElementById('adSlotFooter').value = adSettings.adSlotFooter || '';
      } catch (e) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:', e);
        alert(translations[localStorage.getItem('lang') || 'ar']?.errors?.storage_error || 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
      }
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    function checkPassword() {
      const password = document.getElementById('pass').value;
      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù…Ù†Ø¹ XSS
      const sanitizedPassword = password.replace(/[<>&"]/g, '');
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø«Ø§Ø¨ØªØ© ØºÙŠØ± Ø¢Ù…Ù†. ÙŠÙÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØµØ§Ø¯Ù‚Ø© Ø®Ø§Ø¯Ù….
      if (sanitizedPassword === 'Farida') {
        localStorage.setItem('adminSession', 'true');
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('panel').style.display = 'block';
        document.getElementById('logoutBtn').style.display = 'inline-block';
        loadAdSettings();
      } else {
        alert(translations[localStorage.getItem('lang') || 'ar']?.errors?.invalid_password || 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©');
      }
    }

    // Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
    function saveAdSettings(event) {
      event.preventDefault();
      const adSettings = {
        adClient: document.getElementById('adClient').value.trim(),
        adSlotQuiz: document.getElementById('adSlotQuiz').value.trim(),
        adSlotResults: document.getElementById('adSlotResults').value.trim(),
        adSlotFooter: document.getElementById('adSlotFooter').value.trim()
      };
      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ù…Ø¹Ø±Ù Ø¹Ù…ÙŠÙ„ AdSense
      if (!adSettings.adClient.startsWith('ca-pub-')) {
        alert(translations[localStorage.getItem('lang') || 'ar']?.errors?.invalid_ad_client || 'Ù…Ø¹Ø±Ù Ø¹Ù…ÙŠÙ„ AdSense ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ ca-pub-');
        return;
      }
      try {
        localStorage.setItem('adSettings', JSON.stringify(adSettings));
        // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ index.html
        window.dispatchEvent(new CustomEvent('adSettingsUpdated', { detail: adSettings }));
        alert(translations[localStorage.getItem('lang') || 'ar']?.ui?.settings_saved || 'ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
      } catch (e) {
        alert(translations[localStorage.getItem('lang') || 'ar']?.errors?.storage_error || 'Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ØºÙŠØ± Ù…ØªØ§Ø­');
      }
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…
    function applyTheme(theme) {
      document.body.className = theme;
      localStorage.setItem('theme', theme);
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
      applyTheme(nextTheme);
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ©
    async function changeLanguage(lang) {
      localStorage.setItem('lang', lang);
      await loadLanguage(lang);
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
    function logout() {
      localStorage.removeItem('adminSession');
      localStorage.removeItem('session'); // ØªÙˆØ§ÙÙ‚ Ù…Ø¹ script.js
      location.reload();
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
    window.onload = async () => {
      applyTheme(localStorage.getItem('theme') || 'light');
      const adminSession = localStorage.getItem('adminSession');
      await loadLanguage(localStorage.getItem('lang') || 'ar');
      if (adminSession) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('panel').style.display = 'block';
        document.getElementById('logoutBtn').style.display = 'inline-block';
        loadAdSettings();
      }
    };
  </script>
</body>
</html>