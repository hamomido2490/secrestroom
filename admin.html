<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة التحكم - غرفة الأسرار</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .admin-container { max-width: 800px; margin: 40px auto; padding: 20px; }
        .stat-card { background: var(--card-bg-light); padding: 15px; margin: 10px 0; border-radius: 8px; }
        .settings-form { margin-top: 30px; }
    </style>
</head>
<body class="light">
    <div class="admin-container">
        <h1>لوحة التحكم</h1>
        <div id="loginSection" style="text-align: center;">
            <input type="password" id="adminPass" placeholder="كلمة المرور">
            <button onclick="login()">دخول</button>
        </div>

        <div id="dashboard" style="display: none;">
            <div class="stat-card"><strong>عدد الزوار:</strong> <span id="visitorStat">0</span></div>
            <div class="stat-card"><strong>عدد الاختبارات:</strong> <span id="testStat">0</span></div>
            <div class="stat-card"><strong>آخر زيارة:</strong> <span id="lastVisitStat">-</span></div>

            <div class="settings-form">
                <h3>إعدادات الإعلانات</h3>
                <input type="text" id="adClient" placeholder="ca-pub-..."><br><br>
                <input type="text" id="adSlotQuiz" placeholder="Quiz Ad Slot"><br><br>
                <input type="text" id="adSlotResults" placeholder="Results Ad Slot"><br><br>
                <button onclick="saveAdSettings()">حفظ الإعدادات</button>
            </div>
        </div>
    </div>

    <script>
        const ADMIN_PASS = "secret123"; // غيرها

        function login() {
            const pass = document.getElementById("adminPass").value;
            if (pass === ADMIN_PASS) {
                document.getElementById("loginSection").style.display = "none";
                document.getElementById("dashboard").style.display = "block";
                loadStats();
            } else {
                alert("كلمة مرور خاطئة");
            }
        }

        function loadStats() {
            const userData = JSON.parse(localStorage.getItem('psychApp_v4')) || {};
            document.getElementById("visitorStat").textContent = userData.visitorCount || 0;
            document.getElementById("testStat").textContent = userData.testCount || 0;
            document.getElementById("lastVisitStat").textContent = userData.lastVisit ? new Date(userData.lastVisit).toLocaleString('ar-EG') : "-";
        }

        function saveAdSettings() {
            const settings = {
                adClient: document.getElementById("adClient").value,
                adSlotQuiz: document.getElementById("adSlotQuiz").value,
                adSlotResults: document.getElementById("adSlotResults").value
            };
            localStorage.setItem("adSettings", JSON.stringify(settings));
            alert("تم الحفظ! أعد تحميل الموقع.");
        }
    </script>
</body>
</html>
